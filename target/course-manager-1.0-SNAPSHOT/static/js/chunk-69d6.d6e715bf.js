(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-69d6"],{"+LVF":function(e,t,s){"use strict";s.d(t,"b",function(){return n}),s.d(t,"c",function(){return i}),s.d(t,"d",function(){return l}),s.d(t,"a",function(){return r});var o=s("t3Un");function n(e){return Object(o.a)({url:"/api/moduleAim/selectOne/"+e,method:"get"})}function i(e){return Object(o.a)({url:"/api/moduleAim/insert",method:"post",data:e})}function l(e){return Object(o.a)({url:"/api/moduleAim/update",method:"put",data:e})}function r(e){return Object(o.a)({url:"/api/moduleAim/delete/"+e,method:"delete"})}},"/OgP":function(e,t,s){},"0JvU":function(e,t,s){"use strict";s.d(t,"b",function(){return n}),s.d(t,"d",function(){return i}),s.d(t,"e",function(){return l}),s.d(t,"c",function(){return r}),s.d(t,"f",function(){return a}),s.d(t,"h",function(){return u}),s.d(t,"g",function(){return c}),s.d(t,"a",function(){return d});var o=s("t3Un");function n(e){return Object(o.a)({url:"/api/content/selectLOs/"+e,method:"get"})}function i(){return Object(o.a)({url:"/api/content/selectContentLOs",method:"get"})}function l(e){return Object(o.a)({url:"/api/content/selectOne/"+e,method:"get"})}function r(e){return Object(o.a)({url:"/api/content/selectPrerequisites",method:"post",data:e})}function a(e){return Object(o.a)({url:"/api/content/insert",method:"post",data:e})}function u(e){return Object(o.a)({url:"/api/content/update",method:"put",data:e})}function c(e,t){return Object(o.a)({url:"/api/moduleContentLO/insert/"+e,method:"post",data:t})}function d(e){return Object(o.a)({url:"/api/content/delete/"+e,method:"delete"})}},AyHj:function(e,t,s){},IPqZ:function(e,t,s){},Lcl0:function(e,t,s){"use strict";var o=s("Rn2o");s.n(o).a},NA6J:function(e,t,s){"use strict";s.d(t,"b",function(){return n}),s.d(t,"c",function(){return i}),s.d(t,"d",function(){return l}),s.d(t,"e",function(){return r}),s.d(t,"a",function(){return a});var o=s("t3Un");function n(){return Object(o.a)({url:"/api/programKnowledge/selectAll",method:"get"})}function i(e){return Object(o.a)({url:"/api/programKnowledge/selectLo/"+e,method:"get"})}function l(e){return Object(o.a)({url:"/api/programKnowledge/insert",method:"post",data:e})}function r(e){return Object(o.a)({url:"/api/programKnowledge/update",method:"put",data:e})}function a(e){return Object(o.a)({url:"/api/programKnowledge/delete/"+e,method:"delete"})}},NQde:function(e,t,s){"use strict";s.d(t,"c",function(){return n}),s.d(t,"b",function(){return i}),s.d(t,"d",function(){return l}),s.d(t,"f",function(){return r}),s.d(t,"e",function(){return a}),s.d(t,"g",function(){return u}),s.d(t,"a",function(){return c});var o=s("t3Un");function n(e){return Object(o.a)({url:"/api/moduleLO/selectSkills/"+e,method:"get"})}function i(e){return Object(o.a)({url:"/api/moduleLO/selectKnowledge/"+e,method:"get"})}function l(e){return Object(o.a)({url:"/api/moduleLO/insert",method:"post",data:e})}function r(e,t){return Object(o.a)({url:"/api/programSkillLo/insert/"+e,method:"post",data:t})}function a(e,t){return Object(o.a)({url:"/api/programKnowledgeLo/insert/"+e,method:"post",data:t})}function u(e){return Object(o.a)({url:"/api/moduleLO/update",method:"put",data:e})}function c(e){return Object(o.a)({url:"/api/moduleLO/delete/"+e,method:"delete"})}},R1vE:function(e,t,s){},RGAW:function(e,t,s){"use strict";var o=s("AyHj");s.n(o).a},Rn2o:function(e,t,s){},gWve:function(e,t,s){"use strict";s.d(t,"g",function(){return n}),s.d(t,"h",function(){return i}),s.d(t,"e",function(){return l}),s.d(t,"i",function(){return r}),s.d(t,"j",function(){return a}),s.d(t,"b",function(){return u}),s.d(t,"d",function(){return c}),s.d(t,"c",function(){return d}),s.d(t,"f",function(){return m});var o=s("t3Un");function n(){return Object(o.a)({url:"/api/module/selectAll",method:"get"})}function i(e){return Object(o.a)({url:"/api/history/insertModule",method:"post",data:e})}function l(e){return Object(o.a)({url:"/api/module/selectOne/"+e,method:"get"})}function r(e){return Object(o.a)({url:"/api/module/insert",method:"post",data:e})}function a(e){return Object(o.a)({url:"/api/module/update",method:"put",data:e})}function u(e){return Object(o.a)({url:"/api/module/selectAims/"+e,method:"get"})}function c(e){return Object(o.a)({url:"/api/module/selectContents/"+e,method:"get"})}function d(e){return Object(o.a)({url:"/api/module/selectAssessments/"+e,method:"get"})}function m(e){return Object(o.a)({url:"/api/module/selectLOs/"+e,method:"get"})}},geQU:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-tabs",{attrs:{"before-leave":e.checkEdit,"tab-position":"top"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"Information",name:"Information"}},[s("info",{on:{isEdit:e.changeEdit,ID:e.returnModuleId,Code:e.returnModuleCode}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:"Aims",name:"Aims"}},[s("aims",{attrs:{"module-id":e.moduleId},on:{isEdit:e.changeEdit,aim:e.changeAim}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:"LearningOutcomes",name:"LearningOutcomes"}},[s("los",{attrs:{"module-id":e.moduleId,"module-code":e.moduleCode},on:{isEdit:e.changeEdit,lo:e.changeLO}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:"Contents",name:"Contents"}},[s("contents",{attrs:{"module-id":e.moduleId,"module-code":e.moduleCode,"list-los":e.listLOs},on:{isEdit:e.changeEdit}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:"Assessments",name:"Assessments"}},[s("assessments",{attrs:{"module-id":e.moduleId,"module-code":e.moduleCode,"list-los":e.listLOs,"list-aims":e.listAims},on:{isEdit:e.changeEdit}})],1),e._v(" "),s("el-tab-pane",{attrs:{label:"Edit History",name:"Edit History"}},[s("history",{on:{isEdit:e.changeEdit}})],1)],1)],1)};o._withStripped=!0;var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-row",{staticStyle:{"margin-right":"0px","margin-left":"0px"},attrs:{gutter:20}},[s("el-form",{ref:"infoForm",attrs:{model:e.module,disabled:e.isDisabled,"label-position":"top","label-width":"130px"}},[s("el-form-item",{attrs:{rules:{required:!0,message:"Please Enter the Code of Module",trigger:"blur"},label:"Module Code",prop:"moduleCode"}},[s("el-input",{model:{value:e.module.moduleCode,callback:function(t){e.$set(e.module,"moduleCode",t)},expression:"module.moduleCode"}})],1),e._v(" "),s("el-form-item",{attrs:{rules:{required:!0,message:"Please Enter the Title of Module",trigger:"blur"},label:"Module Title",prop:"moduleTitle"}},[s("el-input",{model:{value:e.module.moduleTitle,callback:function(t){e.$set(e.module,"moduleTitle",t)},expression:"module.moduleTitle"}})],1)],1)],1),e._v(" "),s("el-row",{staticStyle:{"margin-right":"0px","margin-left":"0px"},attrs:{gutter:20,type:"flex",justify:"center"}},[e.isDisabled?s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.startEdit}},[e._v("Start Editing")])],1):s("el-button-group",[s("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},on:{click:e.onCancel}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{type:"success",icon:"el-icon-edit"},on:{click:function(t){e.dialogSubmitVisible=!0}}},[e._v("Save")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogSubmitVisible,title:"Submit Message"},on:{"update:visible":function(t){e.dialogSubmitVisible=t}}},[s("el-form",{attrs:{model:e.configForm}},[s("el-form-item",{attrs:{rules:{required:!0,message:"Please enter your name for this modify",trigger:"blur"},label:"Please enter your name for this modify"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.configForm.createBy,callback:function(t){e.$set(e.configForm,"createBy",t)},expression:"configForm.createBy"}})],1),e._v(" "),s("el-form-item",{attrs:{rules:{required:!0,message:"Please note this modify",trigger:"blur"},label:"Please note this update"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.configForm.note,callback:function(t){e.$set(e.configForm,"note",t)},expression:"configForm.note"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.onCancel}},[e._v("Cancel Submit")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("Confirm Submit")])],1)],1),e._v(" "),s("el-row",{staticStyle:{"margin-right":"0px","margin-left":"0px","margin-top":"20px"},attrs:{gutter:20}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v("Creator")]),e._v(" "),s("div",[e._v("\n        "+e._s(e.module.createBy)+"\n      ")])])],1),e._v(" "),s("el-row",{staticStyle:{"margin-right":"0px","margin-left":"0px","margin-top":"20px"},attrs:{gutter:20}},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e._v("Created Time")]),e._v(" "),s("div",[e._v("\n        "+e._s(e.module.createTime)+"\n      ")])])],1)],1)};n._withStripped=!0;var i=s("4d7F"),l=s.n(i),r=s("gWve"),a={data:function(){return{isDisabled:!0,module:{moduleId:null,moduleCode:null,moduleTitle:null,createBy:null,createTime:null},configForm:{type:"info",typeId:"0",note:"",createBy:"",createTime:this.setTime(),moduleId:""},dialogSubmitVisible:!1,prerequisites:null,notifyPromise:l.a.resolve()}},created:function(){this.getModuleInfo(this.$route.params.id)},methods:{getModuleInfo:function(e){var t=this;this.listLoading=!0,Object(r.e)(e).then(function(e){t.module=e,t.$emit("ID",t.module.moduleId),t.$emit("Code",t.module.moduleCode)}).catch(function(e){console.log(e)})},startEdit:function(){this.isDisabled=!1,this.$emit("isEdit",!0)},submitForm:function(){var e=this;this.$refs.infoForm.validate(function(t){if(!t)return e.$message({message:"Please Enter the Basic Information of the Module",type:"warning"}),!1;Object(r.j)(e.beforeSubmit()).then(function(t){e.$message({message:"Successful Submit",type:"success"}),e.isDisabled=!0,e.$emit("isEdit",!1),e.$emit("ID",e.module.moduleId),e.$emit("Code",e.module.moduleCode),e.notify("Module Submit","Update Module Successful","success"),console.info("[/module/edit/info] - After Update Submit:",e.module),e.configForm.moduleId=e.module.moduleId,Object(r.h)(e.configForm).then(function(t){console.info("[/module/edit/info] - After Submit History:",e.configForm)}).catch(function(e){console.warn("[/module/edit/info] - Submit History Error:",e)})}).catch(function(t){e.$notify.error({title:"Module Submit",message:"Update Module Failed - "+t,duration:0}),console.log(t)})})},beforeSubmit:function(){return{moduleId:this.module.moduleId,moduleCode:this.module.moduleCode,moduleTitle:this.module.moduleTitle,createBy:this.module.createBy,createTime:this.module.createTime}},onCancel:function(){this.dialogSubmitVisible&&(this.dialogSubmitVisible=!1),this.$message({message:"Cancel Edit",type:"warn"}),this.getModuleInfo(this.$route.params&&this.$route.params.id),this.isDisabled=!0,this.$emit("isEdit",!1)},notify:function(e,t,s){var o=this;this.notifyPromise=this.notifyPromise.then(this.$nextTick).then(function(){o.$notify({title:e,message:t,type:s})})},setTime:function(){var e=new Date,t=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),n=e.getHours(),i=e.getMinutes(),l=e.getSeconds(),r=e.getMilliseconds();return s>=1&&s<=9&&(s="0"+s),o>=0&&o<=9&&(o="0"+o),n>=0&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),l>=0&&l<=9&&(l="0"+l),r>=10&&r<=99?r="0"+r:r>=0&&r<=9&&(r="00"+r),t+"-"+s+"-"+o+" "+n+":"+i+":"+l+"."+r}}},u=(s("u3pH"),s("KHd+")),c=Object(u.a)(a,n,[],!1,null,null,null);c.options.__file="src/views/module/edit/info.vue";var d=c.exports,m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{ref:"aimForm",attrs:{model:e.aimForm,disabled:e.isDisabled,"label-position":"right"},nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(e.aimForm.aims,function(t,o){return s("el-form-item",{key:t.aimId,attrs:{prop:"aims."+o+".aimDescription",rules:{required:!0,message:"Please Enter the Aim Description",trigger:"blur"},label:"Aim "+(o+1),"label-width":"70px"}},[s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:18}},[s("el-input",{attrs:{placeholder:"Please Enter the Aim "+(o+1)},model:{value:t.aimDescription,callback:function(s){e.$set(t,"aimDescription",s)},expression:"item.aimDescription"}})],1),e._v(" "),s("el-col",{attrs:{span:4}},[s("el-button",{on:{click:function(s){e.deleteAim(t,o)}}},[e._v("Delete Aim "+e._s(o+1))])],1)],1)],1)}),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(t){e.addAim()}}},[e._v("Add More Aim")])],2),e._v(" "),s("el-row",{staticStyle:{"margin-right":"0px","margin-left":"0px"},attrs:{gutter:20,type:"flex",justify:"center"}},[e.isDisabled?s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.startEdit()}}},[e._v("Start Editing")])],1):s("el-button-group",[s("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},on:{click:e.onCancel}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{type:"success",icon:"el-icon-edit"},on:{click:function(t){e.dialogSubmitVisible=!0}}},[e._v("Save")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogSubmitVisible,title:"Submit Message"},on:{"update:visible":function(t){e.dialogSubmitVisible=t}}},[s("el-form",{attrs:{model:e.configForm}},[s("el-form-item",{attrs:{rules:{required:!0,message:"Please enter your name for this modify",trigger:"blur"},label:"Please enter your name for this modify"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.configForm.createBy,callback:function(t){e.$set(e.configForm,"createBy",t)},expression:"configForm.createBy"}})],1),e._v(" "),s("el-form-item",{attrs:{rules:{required:!0,message:"Please note this modify",trigger:"blur"},label:"Please note this update"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.configForm.note,callback:function(t){e.$set(e.configForm,"note",t)},expression:"configForm.note"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.onCancel}},[e._v("Cancel Submit")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("Confirm Submit")])],1)],1)],1)};m._withStripped=!0;var f=s("+LVF"),p={props:{moduleId:{type:String,default:null}},data:function(){return{isDisabled:!0,aimForm:{aims:[{aimId:"",aimDescription:""}]},deleteList:{isDelete:!1,list:[]},configForm:{type:"aim",typeId:"0",note:"",createBy:"",createTime:this.setTime(),moduleId:this.moduleId},dialogSubmitVisible:!1,notifyPromise:l.a.resolve()}},created:function(){var e=this.$route.params&&this.$route.params.id;this.getModuleAim(e)},methods:{getModuleAim:function(e){var t=this;this.listLoading=!0,Object(r.b)(e).then(function(e){if(0!==e.length)for(var s=0;s<e.length;s++)t.aimForm.aims.splice(s,1,{aimId:e[s].aimId,aimDescription:e[s].aimDescription});t.$emit("aim",t.beforeTransfer()),t.listLoading=!1,console.log("[/views/module/edit/aims] - fetchAim:",t.aimForm.aims)}).catch(function(e){t.$notify.error({title:"Aim",message:"Fetch List Failed - "+e,duration:0}),console.error("[/views/module/edit/aims] - fetchAim Error:"+e)})},startEdit:function(){this.isDisabled=!1,this.$emit("isEdit",!0)},submitForm:function(){var e=this;this.$refs.aimForm.validate(function(t){if(!t)return alert("Please Enter the Title of this Aim or Delete the empty Aim"),console.warn("[/module/edit/aim] - Submit - Failed: Invalid input info"),!1;var s=e.beforeSubmit();l.a.all([Object(f.c)(s.insert)].map(function(e){return e.catch(function(e){return e})})).then(function(t){if(t[0]instanceof Array){for(var o=0;o<s.insert.length;o++)e.aimForm.aims[s.insertIndex[o]].aimId=t[0][o].aimId;e.notify("Aim Submit","Add Successful","success")}else e.$notify.error({title:"Aim Submit",message:"Add Failed - "+t[0],duration:0});if(e.deleteList.isDelete)for(var n=function(t){Object(f.a)(e.deleteList.list[t].aimId).then(function(s){e.notify("Aim Submit","Delete Successful","success"),console.info("[/module/new/aims] - After Submit Delete:",e.deleteList.list[t]),t===e.deleteList.list.length-1&&(e.deleteList.isDelete=!1,e.deleteList.list=[])}).catch(function(t){e.$notify.error({title:"Aim Submit",message:"Delete Failed - "+t,duration:0}),console.warn("[/module/new/aims] - Submit Delete Error:",t)})},i=0;i<e.deleteList.list.length;i++)n(i);e.$emit("aim",e.beforeTransfer()),e.isDisabled=!0,e.$emit("isEdit",!1)}).catch(function(t){e.$notify.error({title:"Module",message:"Submit Failed",duration:0}),console.log("[/module/new/aims] - Submit - All - Error:",t)}),Object(f.d)(s.update).then(function(t){e.notify("Aim Submit","Update Successful","success")}).catch(function(t){e.$notify.error({title:"Aim Submit",message:"Update Failed - "+t,duration:0}),console.log("[/module/edit/aims] - Submit - Update - Error:",t)}),e.configForm.moduleId=e.moduleId,Object(r.h)(e.configForm).then(function(t){console.info("[/module/edit/aims] - After Submit History:",e.configForm)}).catch(function(e){console.warn("[/module/edit/aims] - Submit History Error:",e)})}),this.dialogSubmitVisible=!1},beforeSubmit:function(){var e=this,t={insert:[],insertIndex:[],update:[]},s=0;return this.aimForm.aims.forEach(function(o){-1===o.aimId.indexOf("TEMP")?t.update.push({moduleId:e.moduleId,aimId:o.aimId,aimDescription:o.aimDescription}):(t.insertIndex.push(s),t.insert.push({moduleId:e.moduleId,aimDescription:o.aimDescription})),s++}),t},beforeTransfer:function(){for(var e=[],t=0;t<this.aimForm.aims.length;t++)e.push({aimId:this.aimForm.aims[t].aimId,aimCode:"Aim"+(t+1),context:this.aimForm.aims[t].aimDescription});return e},onCancel:function(){this.dialogSubmitVisible&&(this.dialogSubmitVisible=!1),this.$message({message:"Cancel Edit",type:"warn"}),this.getModuleAim(this.$route.params&&this.$route.params.id),this.isDisabled=!0,this.$emit("isEdit",!1)},addAim:function(){this.aimForm.aims.push({moduleId:this.moduleId,aimId:"TEMP"+Date.now(),aimDescription:""})},deleteAim:function(e,t){-1===e.aimId.indexOf("TEMP")&&(this.deleteList.isDelete=!0,this.deleteList.list.push({aimId:e.aimId})),0===this.aimForm.aims.length?this.$message({message:"Please Enter at least one Aim",type:"error"}):-1!==t&&this.aimForm.aims.splice(t,1)},notify:function(e,t,s){var o=this;this.notifyPromise=this.notifyPromise.then(this.$nextTick).then(function(){o.$notify({title:e,message:t,type:s})})},setTime:function(){var e=new Date,t=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),n=e.getHours(),i=e.getMinutes(),l=e.getSeconds(),r=e.getMilliseconds();return s>=1&&s<=9&&(s="0"+s),o>=0&&o<=9&&(o="0"+o),n>=0&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),l>=0&&l<=9&&(l="0"+l),r>=10&&r<=99?r="0"+r:r>=0&&r<=9&&(r="00"+r),t+"-"+s+"-"+o+" "+n+":"+i+":"+l+"."+r}}},h=(s("nUFa"),Object(u.a)(p,m,[],!1,null,"535ed0ea",null));h.options.__file="src/views/module/edit/aims.vue";var g=h.exports,b=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{ref:"loForm",attrs:{model:e.loForm,disabled:e.isDisabled,"label-position":"right"},nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(e.loForm.los,function(t,o){return s("div",{key:t.loId},[s("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("Learning Outcome "+e._s(o+1))]),e._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(s){e.deleteLO(t,o)}}},[e._v("Delete LearningOutcome "+e._s(o+1))])],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"los."+o+".context",rules:{required:!0,message:"Please Enter the Learning Outcome Context",trigger:"blur"},label:"Context:"}},[s("el-input",{attrs:{placeholder:"Please Enter the Learning Outcome "+(o+1)},model:{value:t.context,callback:function(s){e.$set(t,"context",s)},expression:"item.context"}})],1)],1)],1),e._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"los."+o+".toSkillSelect",label:"Skill"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisabled,multiple:"",placeholder:"Please Select Skill"},model:{value:t.toSkillSelect,callback:function(s){e.$set(t,"toSkillSelect",s)},expression:"item.toSkillSelect"}},e._l(e.listSkills,function(e){return s("el-option",{key:e.skillId,attrs:{label:e.context,value:e.skillId}})}))],1)],1)],1),e._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"los."+o+".toKnowledgeSelect",label:"Knowledge"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisabled,multiple:"",placeholder:"Please Select Knowledge"},model:{value:t.toKnowledgeSelect,callback:function(s){e.$set(t,"toKnowledgeSelect",s)},expression:"item.toKnowledgeSelect"}},e._l(e.listKnowledges,function(e){return s("el-option",{key:e.knowledgeId,attrs:{label:e.context,value:e.knowledgeId}})}))],1)],1)],1)],1)],1)}),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(t){e.addLO()}}},[e._v("Add More LearningOutcome")])],2),e._v(" "),s("el-row",{staticStyle:{"margin-right":"0px","margin-left":"0px"},attrs:{gutter:20,type:"flex",justify:"center"}},[e.isDisabled?s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.startEdit()}}},[e._v("Start Editing")])],1):s("el-button-group",[s("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},on:{click:e.onCancel}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{type:"success",icon:"el-icon-edit"},on:{click:function(t){e.dialogSubmitVisible=!0}}},[e._v("Save")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogSubmitVisible,title:"Submit Message"},on:{"update:visible":function(t){e.dialogSubmitVisible=t}}},[s("el-form",{attrs:{model:e.configForm}},[s("el-form-item",{attrs:{rules:{required:!0,message:"Please enter your name for this modify",trigger:"blur"},label:"Please enter your name for this modify"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.configForm.createBy,callback:function(t){e.$set(e.configForm,"createBy",t)},expression:"configForm.createBy"}})],1),e._v(" "),s("el-form-item",{attrs:{rules:{required:!0,message:"Please note this modify",trigger:"blur"},label:"Please note this update"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.configForm.note,callback:function(t){e.$set(e.configForm,"note",t)},expression:"configForm.note"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.onCancel}},[e._v("Cancel Submit")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("Confirm Submit")])],1)],1)],1)};b._withStripped=!0;var v=s("NQde"),S=s("x27+"),_=s("NA6J"),y={props:{moduleId:{type:String,default:null},moduleCode:{type:String,default:null}},data:function(){return{isFinish:!0,isDisabled:!0,listSkills:[],listKnowledges:[],loForm:{los:[{moduleId:this.moduleId,moduleCode:this.moduleCode,loId:"TEMP"+Date.now(),loCode:"",context:""}]},deleteList:{isDelete:!1,list:[]},configForm:{type:"aim",typeId:"0",note:"",createBy:"",createTime:this.setTime(),moduleId:this.moduleId},dialogSubmitVisible:!1,notifyPromise:l.a.resolve()}},created:function(){var e=this.$route.params&&this.$route.params.id;this.getProgrammeLO(),this.getModuleLO(e)},methods:{getProgrammeLO:function(){var e=this;Object(S.c)().then(function(t){for(var s=0;s<t.length;s++)e.listSkills.splice(s,1,{skillId:t[s].skillId,skillCode:"S"+(s+1),context:t[s].context});console.log("[/module/edit/los] - fetchSkillList:",e.listSkills)}).catch(function(t){e.$notify.error({title:"Learning Outcome - Skill",message:"Fetch List Failed - "+t,duration:0}),console.error("[/module/edit/los] - fetchSkillList Error: "+t)}),Object(_.b)().then(function(t){for(var s=0;s<t.length;s++)e.listKnowledges.splice(s,1,{knowledgeId:t[s].knowledgeId,skillCode:"K"+(s+1),context:t[s].knowledgeContext});console.log("[/module/edit/los] - fetchKnowledgeList:",e.listKnowledges)}).catch(function(t){e.$notify.error({title:"Learning Outcome - Knowledge",message:"Fetch List Failed - "+t,duration:0}),console.error("[/module/edit/los] - fetchKnowledgeList Error: "+t)})},getModuleLO:function(e){var t=this;this.listLoading=!0;var s=[],o=[];Object(r.f)(e).then(function(e){console.log("TEST response",e);for(var n=function(n){s.splice(n,1,[]),o.splice(n,1,[]),e[n].toSkillSelect.forEach(function(e){for(var o=function(o){var i=t.listSkills.findIndex(function(t){return t.skillId===e.programSkills[o].skillId});s[n].splice(o,1,t.listSkills[i].skillId)},i=0;i<e.programSkills.length;i++)o(i)}),e[n].toKnowledgeSelect.forEach(function(e){for(var s=function(s){var i=t.listKnowledges.findIndex(function(t){return t.knowledgeId===e.programKnowledge[s].knowledgeId});o[n].splice(s,1,t.listKnowledges[i].knowledgeId)},i=0;i<e.programKnowledge.length;i++)s(i)}),t.loForm.los.splice(n,1,{loId:e[n].moduleLoId,loCode:"",loTitle:e[n].loTitle,context:e[n].context,toSkillSelect:s[n],toKnowledgeSelect:o[n]})},i=0;i<e.length;i++)n(i);console.log("[/module/edit/los] - fetchLO:",t.loForm.los),t.$emit("lo",t.beforeTransfer())}).catch(function(e){t.$notify.error({title:"Learning Outcome",message:"Fetch List Failed - "+e,duration:0}),console.error("[/module/edit/los] - fetchLO Error: "+e)})},startEdit:function(){this.isDisabled=!1,this.$emit("isEdit",!0)},doSubmitInsert:function(e,t){var s=this;Object(v.d)(e).then(function(e){for(var o=0;o<e.length;o++)s.loForm.los[t[o]].loId=e[o].moduleLoId;var n=s.formatRelation();Object(v.f)(n.skill[0].loId,n.skill).then(function(e){console.info("[/module/new/los] - After Submit Skill Insert:",e)}).catch(function(e){s.isFinish=!1,console.warn("[/module/new/los] - Submit Skill Insert Error:",e)}),Object(v.e)(n.knowledge[0].loId,n.knowledge).then(function(e){console.info("[/module/new/los] - After Submit Knowledge Insert:",e)}).catch(function(e){s.isFinish=!1,console.warn("[/module/new/los] - Submit Knowledge Insert Error:",e)}),s.$emit("lo",s.beforeTransfer()),console.info("[/module/new/los] - After Submit Insert:",s.loForm.los)}).catch(function(e){s.$notify.error({title:"LO Submit",message:"Add Failed - "+e,duration:0}),console.warn("[/module/new/los] - Submit Insert Error:",e),s.isFinish=!1})},doSubmitUpdate:function(e){var t=this;Object(v.g)(e).then(function(e){console.info("[/module/new/los] - After Submit Update:",t.loForm.los)}).catch(function(e){t.$notify.error({title:"LO Submit",message:"Update Failed - "+e,duration:0}),t.isFinish=!1,console.warn("[/module/new/los] - Submit Update Error:",e)})},doSubmitDelete:function(){var e=this;if(this.deleteList.isDelete)for(var t=function(t){Object(v.a)(e.deleteList.list[t].loId).then(function(s){console.info("[/module/new/los] - After Submit Delete:",e.deleteList.list[t])}).catch(function(s){e.$notify.error({title:"LO Submit",message:"Delete Failed - "+e.deleteList.list[t].context,duration:0}),e.isFinish=!1,console.warn("[/module/new/los] - Submit Delete Error:",s)}),e.notify("LO Submit","Delete Successful","success")},s=0;s<this.deleteList.list.length;s++)t(s)},submitForm:function(){var e=this;this.$refs.loForm.validate(function(t){if(!t)return alert("Please Enter the Description of this LO or Delete the empty LO"),console.warn("error submit!!"),!1;var s=e.beforeSubmit();e.doSubmitInsert(s.insert,s.insertIndex),e.doSubmitUpdate(s.update),e.doSubmitDelete(),e.isFinish?(e.$message({message:"Successful Submit",type:"success"}),e.isDisabled=!0,e.$emit("isEdit",!1)):e.$message({message:"Failed Submit",type:"warning"}),e.configForm.moduleId=e.moduleId,Object(r.h)(e.configForm).then(function(t){console.info("[/module/edit/los] - After Submit History:",e.configForm)}).catch(function(e){console.warn("[/module/edit/los] - Submit History Error:",e)})}),this.dialogSubmitVisible=!1},formatRelation:function(){var e=this,t={skill:[],knowledge:[]};return this.loForm.los.forEach(function(s){s.toSkillSelect.forEach(function(o){var n=e.listSkills.findIndex(function(e){return e.skillId===o});t.skill.push({skillId:e.listSkills[n].skillId,loId:s.loId})}),s.toKnowledgeSelect.forEach(function(o){var n=e.listKnowledges.findIndex(function(e){return e.knowledgeId===o});t.knowledge.push({knowledgeId:e.listKnowledges[n].knowledgeId,loId:s.loId})})}),console.log("TEST formatRelation:",t),t},beforeTransfer:function(){for(var e=[],t=0;t<this.loForm.los.length;t++)e.push({loId:this.loForm.los[t].loId,loCode:"LO"+(t+1),context:this.loForm.los[t].context});return e},beforeSubmit:function(){var e=this,t={insert:[],insertIndex:[],update:[]},s=0;return this.loForm.los.forEach(function(o){-1===o.loId.indexOf("TEMP")?t.update.push({moduleId:e.moduleId,moduleCode:e.moduleCode,moduleLoId:o.loId,context:o.context}):(t.insertIndex.push(s),t.insert.push({moduleId:e.moduleId,moduleCode:e.moduleCode,context:o.context})),s++}),t},onCancel:function(){this.dialogSubmitVisible&&(this.dialogSubmitVisible=!1),this.$message({message:"Cancel Edit",type:"warn"}),this.getModuleLO(this.$route.params&&this.$route.params.id),this.$emit("lo",this.beforeTransfer()),this.isDisabled=!0,this.$emit("isEdit",!1),this.deleteList.isDelete=!1,this.deleteList.list=[]},addLO:function(){this.loForm.los.push({moduleId:this.moduleId,moduleCode:this.moduleCode,loId:"TEMP"+Date.now(),loCode:"",context:""})},deleteLO:function(e,t){-1===e.loId.indexOf("TEMP")&&(this.deleteList.isDelete=!0,this.deleteList.list.push({loId:e.loId})),0===this.loForm.los.length?this.$message({message:"Please Enter at least one Assessment",type:"error"}):-1!==t&&this.loForm.los.splice(t,1)},notify:function(e,t,s){var o=this;this.notifyPromise=this.notifyPromise.then(this.$nextTick).then(function(){o.$notify({title:e,message:t,type:s})})},setTime:function(){var e=new Date,t=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),n=e.getHours(),i=e.getMinutes(),l=e.getSeconds(),r=e.getMilliseconds();return s>=1&&s<=9&&(s="0"+s),o>=0&&o<=9&&(o="0"+o),n>=0&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),l>=0&&l<=9&&(l="0"+l),r>=10&&r<=99?r="0"+r:r>=0&&r<=9&&(r="00"+r),t+"-"+s+"-"+o+" "+n+":"+i+":"+l+"."+r}}},I=(s("RGAW"),Object(u.a)(y,b,[],!1,null,"5b4a67e4",null));I.options.__file="src/views/module/edit/los.vue";var O=I.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{ref:"contentForm",attrs:{model:e.contentForm,disabled:e.isDisabled,"label-position":"top"},nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(e.contentForm.contents,function(t,o){return s("div",{key:t.contentId},[s("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("Content "+e._s(o+1))]),e._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(s){e.deleteContent(t,o)}}},[e._v("Delete Content "+e._s(o+1))])],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"contents."+o+".context",rules:{required:!0,message:"Please Enter the Content Description",trigger:"blur"},label:"Context "+(o+1)}},[s("el-input",{attrs:{placeholder:"Please Enter the Content "+(o+1)},model:{value:t.context,callback:function(s){e.$set(t,"context",s)},expression:"item.context"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"contents."+o+".toLOSelect",rules:{required:!0,message:"Please Select LearningOutcome ",trigger:"blur"},label:"Learning Outcome "+(o+1)}},[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisabled,multiple:"",placeholder:"Please Select LearningOutcome"},model:{value:t.toLOSelect,callback:function(s){e.$set(t,"toLOSelect",s)},expression:"item.toLOSelect"}},e._l(e.listLos,function(e){return s("el-option",{key:e.loId,attrs:{label:e.loCode,value:e.loId}})}))],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"contents."+o+".toContentSelect",label:"Prequisite"}},[s("el-cascader",{staticStyle:{width:"100%"},attrs:{"show-all-levels":!0,options:e.prerequisite,placeholder:"Please Select the Prerequisite Module and Content",filterable:""},on:{"active-item-change":e.handleItemChange},model:{value:t.toContentSelect,callback:function(s){e.$set(t,"toContentSelect",s)},expression:"item.toContentSelect"}})],1)],1)],1)],1)],1)}),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addContent()}}},[e._v("Add More Content")])],2),e._v(" "),s("el-row",{staticStyle:{"margin-right":"0px","margin-left":"0px"},attrs:{gutter:20,type:"flex",justify:"center"}},[e.isDisabled?s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.startEdit()}}},[e._v("Start Editing")])],1):s("el-button-group",[s("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},on:{click:e.onCancel}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{type:"success",icon:"el-icon-edit"},on:{click:function(t){e.dialogSubmitVisible=!0}}},[e._v("Save")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogSubmitVisible,title:"Submit Message"},on:{"update:visible":function(t){e.dialogSubmitVisible=t}}},[s("el-form",{attrs:{model:e.configForm}},[s("el-form-item",{attrs:{rules:{required:!0,message:"Please enter your name for this modify",trigger:"blur"},label:"Please enter your name for this modify"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.configForm.createBy,callback:function(t){e.$set(e.configForm,"createBy",t)},expression:"configForm.createBy"}})],1),e._v(" "),s("el-form-item",{attrs:{rules:{required:!0,message:"Please note this modify",trigger:"blur"},label:"Please note this update"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.configForm.note,callback:function(t){e.$set(e.configForm,"note",t)},expression:"configForm.note"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.onCancel}},[e._v("Cancel Submit")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("Confirm Submit")])],1)],1)],1)};C._withStripped=!0;var E=s("0JvU"),F={props:{listLos:{type:Array,default:null},moduleId:{type:String,default:null},moduleCode:{type:String,default:null}},data:function(){return{isDisabled:!0,listModule:null,prerequisite:[],contentForm:{contents:[{contentId:"TEMP"+Date.now(),context:"",toLOSelect:[],toContentSelect:[]}]},deleteList:{isDelete:!1,list:[]},configForm:{type:"context",typeId:"0",note:"",createBy:"",createTime:this.setTime(),moduleId:this.moduleId},dialogSubmitVisible:!1,notifyPromise:l.a.resolve()}},created:function(){var e=this.$route.params&&this.$route.params.id;this.getModuleContent(e)},methods:{getModuleContent:function(e){var t=this;this.listLoading=!0,Object(r.g)().then(function(e){t.listModule=e,console.log("[/module/edit/contents] - ModuleList",t.listModule),t.prerequisite=[],t.listModule.forEach(function(e){t.prerequisite.push({value:e.moduleId,label:e.moduleCode,children:[]})}),console.log("[/module/edit/contents] - prerequisite",t.prerequisite),t.listLoading=!1}).catch(function(e){t.$notify.error({title:"Contetn - Module",message:"Fetch List Failed - "+e,duration:0}),console.error("[/module/edit/content] - fetchModuleContent Error:"+e)});var s=[];Object(r.d)(e).then(function(e){for(var o=function(o){s.splice(o,1,[]),Object(E.b)(e[o].contentId).then(function(e){console.log("TEST responseLO",e);for(var n=function(n){var i=t.listLos.findIndex(function(t){return t.loId===e[n].moduleLoId});s[o].splice(n,1,t.listLos[i].loId)},i=0;i<e.length;i++)n(i);console.log("[/module/edit/content] - fetchModuleContent LO:",s[o])}).catch(function(e){console.error("[/module/edit/content] - fetchModuleContent LO Error:"+e)});var n={contentId:e[o].contentId,context:e[o].context,toLOSelect:s[o],toContentSelect:[e[o].contentPrerequisite,e[o].connectContentId]};t.contentForm.contents.splice(o,1,n),Object(E.e)(e[o].connectContentId).then(function(s){var n=t.prerequisite.findIndex(function(t){return t.value===e[o].contentPrerequisite});t.prerequisite[n].children.push({label:s.context,value:s.contentId})})},n=0;n<e.length;n++)o(n);console.log("[/module/edit/content] - fetchModuleContent:",t.contentForm.contents),console.log("[/module/edit/content] - fetchOneContent:",t.prerequisite)}).catch(function(e){t.$notify.error({title:"Content - LO",message:"Fetch List Failed - "+e,duration:0}),console.error("[/module/edit/content] - fetchModuleContent Error:"+e)})},handleItemChange:function(e){var t=this,s=this.prerequisite.findIndex(function(t){return t.value===e[0]});0===this.prerequisite[s].children.length&&(Object(r.d)(e[0]).then(function(e){e.forEach(function(e){t.prerequisite[s].children.push({label:e.context,value:e.contentId})})}),console.log("[/module/edit/content] - fetchModuleConten prerequisite:",this.prerequisite))},startEdit:function(){this.isDisabled=!1,this.$emit("isEdit",!0)},submitForm:function(){var e=this;this.$refs.contentForm.validate(function(t){if(!t)return alert("Please Enter the Description of this Content or Delete the empty Content"),console.warn("error submit!!"),!1;var s=!0,o=e.beforeSubmit();if(console.log("[/module/new/contents] - Before Submit tempData:",o),Object(E.f)(o.insert).then(function(t){for(var n=0;n<o.insert.length;n++)e.contentForm.contents[o.insertIndex[n]].contentId=t[n].contentId;console.log("[/module/new/contents] - After Submit:",e.contentForm.contents);var i=e.formatRelation();Object(E.g)(i[0].moduleContentId,i).then(function(e){console.log("[/module/new/contents] - After Submit LO:",e)}).catch(function(e){s=!1,console.warn("[/module/new/contents] - Submit Error LO:",e)}),e.notify("Content - Submit","Add Successful","success")}).catch(function(t){s=!1,e.$notify.error({title:"Content - Submit",message:"Add Failed - "+t,duration:0}),console.warn("[/module/new/contents] - Submit Error:",t)}),Object(E.h)(o.update).then(function(t){e.notify("Content - Submit","Update Successful","success")}).catch(function(t){s=!1,e.$notify.error({title:"Content - Submit",message:"Update Failed - "+t,duration:0}),console.warn("[/module/new/contents] - Submit Error:",t)}),e.deleteList.isDelete)for(var n=function(t){Object(E.a)(e.deleteList.list[t].contentId).then(function(s){e.notify("Content - Submit","Delete Successful","success"),console.info("[/module/new/contents] - After Submit Delete:",e.deleteList.list[t])}).catch(function(t){s=!1,e.$notify.error({title:"Content - Submit",message:"Delete Failed - "+t,duration:0}),console.warn("[/module/new/contents] - Submit Delete Error:",t)})},i=0;i<e.deleteList.list.length;i++)n(i);s?(e.$message({message:"Successful Submit",type:"success"}),e.isDisabled=!0,e.$emit("isEdit",!1)):e.$message({message:"Failed Submit",type:"warn"}),e.configForm.moduleId=e.moduleId,Object(r.h)(e.configForm).then(function(t){console.info("[/module/edit/content] - After Submit History:",e.configForm)}).catch(function(e){console.warn("[/module/edit/content] - Submit History Error:",e)})}),this.dialogSubmitVisible=!1},onCancel:function(){this.dialogSubmitVisible&&(this.dialogSubmitVisible=!1),this.$message({message:"Cancel Edit",type:"warn"}),this.getModuleContent(this.$route.params&&this.$route.params.id),this.isDisabled=!0,this.$emit("isEdit",!1),this.deleteList.isDelete=!1,this.deleteList.list=[]},beforeSubmit:function(){var e=this,t={insert:[],insertIndex:[],update:[]},s=0;return this.contentForm.contents.forEach(function(o){-1===o.contentId.indexOf("TEMP")?o.toContentSelect===[]?t.update.push({moduleId:e.moduleId,moduleCode:e.moduleCode,contentId:o.contentId,context:o.context,connectContentId:null,contentPrerequisite:null}):t.update.push({moduleId:e.moduleId,moduleCode:e.moduleCode,contentId:o.contentId,context:o.context,connectContentId:o.toContentSelect[1],contentPrerequisite:o.toContentSelect[0]}):(t.insertIndex.push(s),o.toContentSelect===[]?t.insert.push({moduleId:e.moduleId,moduleCode:e.moduleCode,context:o.context,connectContentId:null,contentPrerequisite:null}):t.insert.push({moduleId:e.moduleId,moduleCode:e.moduleCode,context:o.context,connectContentId:o.toContentSelect[1],contentPrerequisite:o.toContentSelect[0]})),s++}),console.log("TEST beforeSubmit:",t),t},formatRelation:function(){var e=this,t=[];return this.contentForm.contents.forEach(function(s){s.toLOSelect.forEach(function(o){var n=e.listLos.findIndex(function(e){return e.loId===o});t.push({moduleContentId:s.contentId,moduleLoId:e.listLos[n].loId})})}),console.log("TEST formatRelation:",t),t},addContent:function(){this.contentForm.contents.push({moduleId:this.moduleId,moduleCode:this.moduleCode,contentId:"TEMP"+Date.now(),contentTitle:"",toContentSelect:[]})},deleteContent:function(e,t){-1===e.contentId.indexOf("TEMP")&&(this.deleteList.isDelete=!0,this.deleteList.list.push({contentId:e.contentId})),0===this.contentForm.contents.length?this.$message({message:"Please Enter at least one Assessment",type:"error"}):-1!==t&&this.contentForm.contents.splice(t,1)},notify:function(e,t,s){var o=this;this.notifyPromise=this.notifyPromise.then(this.$nextTick).then(function(){o.$notify({title:e,message:t,type:s})})},setTime:function(){var e=new Date,t=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),n=e.getHours(),i=e.getMinutes(),l=e.getSeconds(),r=e.getMilliseconds();return s>=1&&s<=9&&(s="0"+s),o>=0&&o<=9&&(o="0"+o),n>=0&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),l>=0&&l<=9&&(l="0"+l),r>=10&&r<=99?r="0"+r:r>=0&&r<=9&&(r="00"+r),t+"-"+s+"-"+o+" "+n+":"+i+":"+l+"."+r}}},w=(s("Lcl0"),Object(u.a)(F,C,[],!1,null,"9a08d794",null));w.options.__file="src/views/module/edit/contents.vue";var x=w.exports,L=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container"},[s("el-form",{ref:"assessmentForm",attrs:{model:e.assessmentForm,disabled:e.isDisabled},nativeOn:{submit:function(e){e.preventDefault()}}},[e._l(e.assessmentForm.assessments,function(t,o){return s("div",{key:t.assessmentId},[s("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"20px"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",[e._v("Assessment "+e._s(o+1))]),e._v(" "),s("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(s){e.deleteAssessment(t,o)}}},[e._v("Delete Assessment "+e._s(o+1))])],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"assessments."+o+".assessmentTitle",rules:{required:!0,message:"Please Enter the Assessment Title",trigger:"blur"},label:"Title:"}},[s("el-input",{attrs:{placeholder:"Please Enter the Assessment "+(o+1)},model:{value:t.assessmentTitle,callback:function(s){e.$set(t,"assessmentTitle",s)},expression:"item.assessmentTitle"}})],1)],1)],1),e._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-form-item",{attrs:{prop:"assessments."+o+".assessmentType",rules:{required:!0,message:"Please Select the Assessment Format",trigger:"blur"},label:"Format:"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"Please select the format"},model:{value:t.assessmentType,callback:function(s){e.$set(t,"assessmentType",s)},expression:"item.assessmentType"}},[s("el-option",{attrs:{label:"MOLE quiz",value:"MOLE quiz"}}),e._v(" "),s("el-option",{attrs:{label:"Assignment",value:"Assignment"}}),e._v(" "),s("el-option",{attrs:{label:"Assessed lab",value:"Assessed lab"}}),e._v(" "),s("el-option",{attrs:{label:"Group Systems Design Project",value:"Group Systems Design Project"}}),e._v(" "),s("el-option",{attrs:{label:"Formal exam",value:"Formal exam"}}),e._v(" "),s("el-option",{attrs:{label:"Portfolio",value:"Portfolio"}}),e._v(" "),s("el-option",{attrs:{label:"Exercise/problem sheet",value:"Exercise/problem sheet"}}),e._v(" "),s("el-option",{attrs:{label:"Presentation",value:"Presentation"}})],1)],1)],1),e._v(" "),s("el-col",{attrs:{span:16}},[s("el-form-item",{attrs:{prop:"assessments."+o+".assessmentPercentage",rules:{required:!0,message:"Please Enter the Assessment Percentage",trigger:"blur"},label:"What percentage of the module is this assessment with:"}},[s("el-input",{model:{value:t.assessmentPercentage,callback:function(s){e.$set(t,"assessmentPercentage",s)},expression:"item.assessmentPercentage"}},[s("template",{slot:"append"},[e._v("%")])],2)],1)],1)],1),e._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{prop:"assessments."+o+".assessmentRelease",rules:{required:!0,message:"Please Select the Assessment Released Date",trigger:"blur"},label:"What date will this assessment be released to students"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy - MM - dd","value-format":"yyyy-MM-dd",placeholder:"Please Select the Released Date"},model:{value:t.assessmentRelease,callback:function(s){e.$set(t,"assessmentRelease",s)},expression:"item.assessmentRelease"}})],1)],1),e._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{prop:"assessments."+o+".assessmentSubmit",rules:{required:!0,message:"Please Select the Assessment Submitted Date",trigger:"blur"},label:"What date will this assessment be handed in/submitted"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",format:"yyyy - MM - dd","value-format":"yyyy-MM-dd",placeholder:"Please Select the Submitted Date"},model:{value:t.assessmentSubmit,callback:function(s){e.$set(t,"assessmentSubmit",s)},expression:"item.assessmentSubmit"}})],1)],1)],1),e._v(" "),s("el-row",{attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"assessments."+o+".toAimSelect",rules:{required:!0,message:"Please Select the Aim that this assessment is contribute to",trigger:"blur"},label:"Aim"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisabled,placeholder:"Please Select the Aim that this assessment is contribute to"},model:{value:t.toAimSelect,callback:function(s){e.$set(t,"toAimSelect",s)},expression:"item.toAimSelect"}},e._l(e.listAims,function(e){return s("el-option",{key:e.aimId,attrs:{label:e.aimCode,value:e.aimId}})}))],1)],1)],1),e._v(" "),s("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[s("el-col",{attrs:{span:24}},[s("el-form-item",{attrs:{prop:"assessments."+o+".toLOSelect",rules:{required:!0,message:"Please Select the Assessment Contributed Learning Outcome",trigger:"blur"},label:"Learning Outcome"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isDisabled,multiple:"",placeholder:"Please Select LearningOutcome"},model:{value:t.toLOSelect,callback:function(s){e.$set(t,"toLOSelect",s)},expression:"item.toLOSelect"}},e._l(e.listLos,function(e){return s("el-option",{key:e.loId,attrs:{label:e.loCode,value:e.loId}})}))],1)],1)],1)],1)],1)}),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addAssessment()}}},[e._v("Add More Assessment")])],2),e._v(" "),s("el-row",{staticStyle:{"margin-right":"0px","margin-left":"0px"},attrs:{gutter:20,type:"flex",justify:"center"}},[e.isDisabled?s("el-button-group",[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.startEdit()}}},[e._v("Start Editing")])],1):s("el-button-group",[s("el-button",{attrs:{type:"danger",icon:"el-icon-edit"},on:{click:e.onCancel}},[e._v("Cancel")]),e._v(" "),s("el-button",{attrs:{type:"success",icon:"el-icon-edit"},on:{click:function(t){e.dialogSubmitVisible=!0}}},[e._v("Save")])],1)],1),e._v(" "),s("el-dialog",{attrs:{visible:e.dialogSubmitVisible,title:"Submit Message"},on:{"update:visible":function(t){e.dialogSubmitVisible=t}}},[s("el-form",{attrs:{model:e.configForm}},[s("el-form-item",{attrs:{rules:{required:!0,message:"Please enter your name for this modify",trigger:"blur"},label:"Please enter your name for this modify"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.configForm.createBy,callback:function(t){e.$set(e.configForm,"createBy",t)},expression:"configForm.createBy"}})],1),e._v(" "),s("el-form-item",{attrs:{rules:{required:!0,message:"Please note this modify",trigger:"blur"},label:"Please note this update"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.configForm.note,callback:function(t){e.$set(e.configForm,"note",t)},expression:"configForm.note"}})],1)],1),e._v(" "),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.onCancel}},[e._v("Cancel Submit")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm()}}},[e._v("Confirm Submit")])],1)],1)],1)};L._withStripped=!0;var A=s("kB6p"),k={props:{listLos:{type:Array,default:null},listAims:{type:Array,default:null},moduleId:{type:String,default:null},moduleCode:{type:String,default:null}},data:function(){return{isDisabled:!0,assessmentForm:{assessments:[{moduleId:this.moduleId,moduleCode:this.moduleCode,assessmentId:"TEMP"+Date.now(),assessmentTitle:"",assessmentPercentage:"",assessmentType:"",assessmentReleased:"",assessmentSubmitted:"",toLOSelect:[],toAimSelect:""}]},deleteList:{isDelete:!1,list:[]},configForm:{type:"assessment",typeId:"0",note:"",createBy:"",createTime:this.setTime(),moduleId:this.moduleId},dialogSubmitVisible:!1,notifyPromise:l.a.resolve()}},created:function(){var e=this.$route.params&&this.$route.params.id;this.getModuleAssessment(e)},methods:{getModuleAssessment:function(e){var t=this;this.listLoading=!0;var s=[];Object(r.c)(e).then(function(e){for(var o=function(o){s.splice(o,1,[]),Object(A.b)(e[o].assessmentId).then(function(e){for(var n=function(n){var i=t.listLos.findIndex(function(t){return t.loId===e[n].moduleLoId});s[o].splice(n,1,t.listLos[i].loId)},i=0;i<e.length;i++)n(i);console.log("[/module/edit/content] - fetchModuleAssessment LO:",s[o])}).catch(function(e){t.$notify.error({title:"Assessment - LO",message:"Fetch LO List Failed - "+e,duration:0}),console.error("[/module/edit/assessments] - fetchModuleAssessment LO Error:"+e)});var n={moduleId:t.moduleId,moduleCode:t.moduleCode,assessmentId:e[o].assessmentId,assessmentTitle:e[o].assessmentTitle,assessmentType:e[o].assessmentType,assessmentPercentage:e[o].percentage,assessmentRelease:e[o].assessmentRelease,assessmentSubmit:e[o].assessmentSubmit,toLOSelect:s[o],toAimSelect:e[o].aimId};t.assessmentForm.assessments.splice(o,1,n)},n=0;n<e.length;n++)o(n);console.log("[/module/edit/content] - fetchModuleAssessment:",t.assessmentForm.assessments)}).catch(function(e){t.$notify.error({title:"Assessment",message:"Fetch List Failed - "+e,duration:0}),console.error("[/module/edit/assessments] - fetchModuleAssessment Error:"+e)})},startEdit:function(){this.isDisabled=!1,this.$emit("isEdit",!0)},submitForm:function(){var e=this;this.$refs.assessmentForm.validate(function(t){if(!t)return alert("Please Enter the Description of this Assessment or Delete the empty Assessment"),console.warn("error submit!!"),!1;var s=!0,o=e.beforeSubmit();if(Object(A.e)(o.insert).then(function(t){for(var n=0;n<o.insert.length;n++)e.assessmentForm.assessments[o.insertIndex[n]].assessmentId=t[n].assessmentId;var i=e.formatRelation();Object(A.f)(i[0].moduleAssessmentId,i).then(function(e){console.info("[/module/new/assessments] - After Submit LO Insert:",e)}).catch(function(e){s=!1,console.warn("[/module/new/assessments] - Submit Insert Error:",e)}),e.notify("Assessment - Submit","Add Successful","success"),console.log("[/module/new/assessments] - After Submit Insert:",e.assessmentForm.assessments)}).catch(function(t){s=!1,e.$notify.error({title:"Assessment - Submit",message:"Add Failed - "+t,duration:0}),console.warn("[/module/new/assessments] - Submit Insert Error:",t)}),Object(A.g)(o.update).then(function(t){e.notify("Assessment - Submit","Update Successful","success"),console.log("[/module/new/assessments] - After Submit Update:",e.assessmentForm.assessments)}).catch(function(t){s=!1,e.$notify.error({title:"Assessment - Submit",message:"Update Failed - "+t,duration:0}),console.warn("[/module/new/assessments] - Submit Update Error:",t)}),e.deleteList.isDelete)for(var n=function(t){Object(A.a)(e.deleteList.list[t].assessmentId).then(function(s){e.notify("Assessment - Submit","Delete Successful","success"),console.info("[/module/new/assessments] - After Submit Delete:",e.deleteList.list[t])}).catch(function(t){s=!1,e.$notify.error({title:"Assessment - Submit",message:"Delete Failed - "+t,duration:0}),console.warn("[/module/new/assessments] - Submit Delete Error:",t)})},i=0;i<e.deleteList.list.length;i++)n(i);s?(e.$message({message:"Successful Submit",type:"success"}),e.isDisabled=!0,e.$emit("isEdit",!1)):e.$message({message:"Failed Submit",type:"warning"}),e.configForm.moduleId=e.moduleId,Object(r.h)(e.configForm).then(function(t){console.info("[/module/edit/content] - After Submit History:",e.configForm)}).catch(function(e){console.warn("[/module/edit/content] - Submit History Error:",e)})}),this.dialogSubmitVisible=!1},beforeSubmit:function(){var e=this,t={insert:[],insertIndex:[],update:[]},s=0;return this.assessmentForm.assessments.forEach(function(o){-1===o.assessmentId.indexOf("TEMP")?t.update.push({assessmentId:o.assessmentId,moduleId:e.moduleId,moduleCode:e.moduleCode,assessmentType:o.assessmentType,percentage:o.assessmentPercentage,aimId:o.toAimSelect,assessmentTitle:o.assessmentTitle,assessmentRelease:o.assessmentRelease,assessmentSubmit:o.assessmentSubmit}):(t.insertIndex.push(s),t.insert.push({moduleId:e.moduleId,moduleCode:e.moduleCode,assessmentType:o.assessmentType,percentage:o.assessmentPercentage,aimId:o.toAimSelect,assessmentTitle:o.assessmentTitle,assessmentRelease:o.assessmentRelease,assessmentSubmit:o.assessmentSubmit})),s++}),t},formatRelation:function(){var e=this,t=[];return this.assessmentForm.assessments.forEach(function(s){s.toLOSelect.forEach(function(o){var n=e.listLos.findIndex(function(e){return e.loId===o});t.push({moduleAssessmentId:s.assessmentId,moduleLoId:e.listLos[n].loId})})}),console.log("TEST formatRelation:",t),t},onCancel:function(){this.dialogSubmitVisible&&(this.dialogSubmitVisible=!1),this.$message({message:"Cancel Edit",type:"warn"}),this.getModuleAssessment(this.$route.params&&this.$route.params.id),this.isDisabled=!0,this.$emit("isEdit",!1),this.deleteList.isDelete=!1,this.deleteList.list=[]},addAssessment:function(){this.assessmentForm.assessments.push({moduleId:this.moduleId,moduleCode:this.moduleCode,assessmentId:"TEMP"+Date.now(),assessmentTitle:""})},deleteAssessment:function(e,t){-1===e.assessmentId.indexOf("TEMP")&&(this.deleteList.isDelete=!0,this.deleteList.list.push({assessmentId:e.assessmentId})),0===this.assessmentForm.assessments.length?this.$message({message:"Please Enter at least one Assessment",type:"error"}):-1!==t&&this.assessmentForm.assessments.splice(t,1)},notify:function(e,t,s){var o=this;this.notifyPromise=this.notifyPromise.then(this.$nextTick).then(function(){o.$notify({title:e,message:t,type:s})})},setTime:function(){var e=new Date,t=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),n=e.getHours(),i=e.getMinutes(),l=e.getSeconds(),r=e.getMilliseconds();return s>=1&&s<=9&&(s="0"+s),o>=0&&o<=9&&(o="0"+o),n>=0&&n<=9&&(n="0"+n),i>=0&&i<=9&&(i="0"+i),l>=0&&l<=9&&(l="0"+l),r>=10&&r<=99?r="0"+r:r>=0&&r<=9&&(r="00"+r),t+"-"+s+"-"+o+" "+n+":"+i+":"+l+"."+r}}},D=(s("uoPC"),Object(u.a)(k,L,[],!1,null,"51c31bf6",null));D.options.__file="src/views/module/edit/assessments.vue";var P=D.exports,$=Object(u.a)({},void 0,void 0,!1,null,null,null);$.options.__file="src/views/module/edit/history.vue";var M={components:{info:d,aims:g,los:O,contents:x,assessments:P,history:$.exports},data:function(){return{activeName:"Information",isEdit:!1,moduleId:"",moduleCode:"",listLOs:null,listAims:null}},methods:{returnModuleId:function(e){this.moduleId=e},returnModuleCode:function(e){this.moduleCode=e},changeLO:function(e){this.listLOs=e,console.log("[/module/edit/index] - listLO:",e)},changeAim:function(e){this.listAims=e,console.log("[/module/edit/index] - listAim:",e)},changeEdit:function(e){this.isEdit=e},checkEdit:function(e,t){if(this.isEdit)return this.$message.error("Please clisk submit or cancel within current tab first!"),!1}}},j=Object(u.a)(M,o,[],!1,null,null,null);j.options.__file="src/views/module/edit/index.vue";t.default=j.exports},kB6p:function(e,t,s){"use strict";s.d(t,"b",function(){return n}),s.d(t,"c",function(){return i}),s.d(t,"d",function(){return l}),s.d(t,"e",function(){return r}),s.d(t,"g",function(){return a}),s.d(t,"f",function(){return u}),s.d(t,"a",function(){return c});var o=s("t3Un");function n(e){return Object(o.a)({url:"/api/assessment/selectLOs/"+e,method:"get"})}function i(){return Object(o.a)({url:"/api/assessment/selectAssessmentAims/1",method:"get"})}function l(){return Object(o.a)({url:"/api/assessment/selectAssessmentLOs",method:"get"})}function r(e){return Object(o.a)({url:"/api/assessment/insert",method:"post",data:e})}function a(e){return Object(o.a)({url:"/api/assessment/update",method:"put",data:e})}function u(e,t){return Object(o.a)({url:"/api/moduleAssessmentLO/insert/"+e,method:"post",data:t})}function c(e){return Object(o.a)({url:"/api/assessment/delete/"+e,method:"delete"})}},nUFa:function(e,t,s){"use strict";var o=s("R1vE");s.n(o).a},t3Un:function(module,__webpack_exports__,__webpack_require__){"use strict";var babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4d7F"),babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0__),axios__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("vDqi"),axios__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__),element_ui__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("XJYT"),element_ui__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(element_ui__WEBPACK_IMPORTED_MODULE_2__),service=axios__WEBPACK_IMPORTED_MODULE_1___default.a.create({baseURL:"http://localhost:8080",timeout:5e3});function getRealJsonData(baseStr){if(baseStr&&"string"==typeof baseStr){var jsonData=null;try{jsonData=JSON.parse(baseStr)}catch(e){return null}var needReplaceStrs=[];loopFindArrOrObj(jsonData,needReplaceStrs),needReplaceStrs.forEach(function(replaceInfo){var matchArr=baseStr.match(eval('/"'+replaceInfo.key+'":[0-9]{15,}/'));if(matchArr){var str=matchArr[0],replaceStr=str.replace('"'+replaceInfo.key+'":','"'+replaceInfo.key+'":"');replaceStr+='"',baseStr=baseStr.replace(str,replaceStr)}});var returnJson=null;try{returnJson=JSON.parse(baseStr)}catch(e){return null}return returnJson}}function getNeedRpStrByObj(e,t){for(var s in e){var o=e[s];"number"==typeof o&&o>9007199254740992&&t.push({key:s}),loopFindArrOrObj(o,t)}}function getNeedRpStrByArr(e,t){for(var s=0;s<e.length;s++){loopFindArrOrObj(e[s],t)}}function loopFindArrOrObj(e,t){var s=Object.prototype.toString.call(e);"[object Object]"==s&&t.concat(getNeedRpStrByObj(e,t)),"[object Array]"==s&&t.concat(getNeedRpStrByArr(e,t))}service.interceptors.request.use(function(e){return e},function(e){console.log(e),babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default.a.reject(e)}),service.interceptors.response.use(function(e){return getRealJsonData(e.request.responseText)},function(e){return console.log("err"+e),Object(element_ui__WEBPACK_IMPORTED_MODULE_2__.Message)({message:e.message,type:"error",duration:5e3}),babel_runtime_core_js_promise__WEBPACK_IMPORTED_MODULE_0___default.a.reject(e)}),__webpack_exports__.a=service},u3pH:function(e,t,s){"use strict";var o=s("IPqZ");s.n(o).a},uoPC:function(e,t,s){"use strict";var o=s("/OgP");s.n(o).a},"x27+":function(e,t,s){"use strict";s.d(t,"c",function(){return n}),s.d(t,"b",function(){return i}),s.d(t,"d",function(){return l}),s.d(t,"e",function(){return r}),s.d(t,"a",function(){return a});var o=s("t3Un");function n(){return Object(o.a)({url:"/api/programSkill/selectAll",method:"get"})}function i(e){return Object(o.a)({url:"/api/programSkill/selectLo/"+e,method:"get"})}function l(e){return Object(o.a)({url:"/api/programSkill/insert",method:"post",data:e})}function r(e){return Object(o.a)({url:"/api/programSkill/update",method:"put",data:e})}function a(e){return Object(o.a)({url:"/api/programSkill/delete/"+e,method:"delete"})}}}]);